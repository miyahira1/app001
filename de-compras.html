<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nihongo Nights | De Compras</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="hero">
        <div class="hero-content">
            <h1 class="hero-title"><span id="js-page-title"></span></h1>
            <p class="hero-subtitle"><span id="js-page-subtitle"></span></p>
            <a href="./index.html" class="cta-button">Volver al inicio</a>
            <a href="https://wa.me/5491132479877?text=Hola,%20quiero%20reservar%20mi%20lugar%20en%20Nihongo%20Nights.%20Mi%20nombre%20es%20[Nombre],%20la%20fecha%20de%20la%20reserva%20es%20[Fecha],%20y%20seremos%20[Cantidad]%20personas." class="cta-button register-button">¡Inscríbete al evento!</a>
        </div>
    </header>

    <main>
        <section id="conversation-starters">
            <h2>Disparadores de Conversación</h2>
            <p>Usa estas preguntas para romper el hielo y practicar tu japonés con otros asistentes.</p>
            <button id="random-starter-button" class="cta-button">Generar Disparador</button>
            <div id="random-starter-display" class="conversation-card" style="display: none; margin-top: 1.5rem;">
                <p class="lang-es" id="starter-es"></p>
                <p class="lang-ja" id="starter-ja"></p>
                <p class="lang-ro" id="starter-ro"></p>
            </div>
        </section>

        <section id="quick-vocabulary">
            <h2>Vocabulario por Nivel</h2>
            <div class="tabs">
                <button class="tab-link active" onclick="openVocab(event, 'n5')">N5</button>
                <button class="tab-link" onclick="openVocab(event, 'n4')">N4</button>
                <button class="tab-link" onclick="openVocab(event, 'n3')">N3</button>
                <button class="tab-link" onclick="openVocab(event, 'n2')">N2</button>
            </div>

            <div id="n5" class="vocab-content active">
                <div class="vocab-grid"></div>
            </div>

            <div id="n4" class="vocab-content">
                <div class="vocab-grid"></div>
            </div>

            <div id="n3" class="vocab-content">
                <div class="vocab-grid"></div>
            </div>

            <div id="n2" class="vocab-content">
                <div class="vocab-grid"></div>
            </div>
        </section>

        <section>
            <h2>Frases Esenciales para <span id="js-page-title-phrase">...</span></h2>
            <p>Aquí tienes una guía con frases en japonés para que puedas desenvolverte en <span id="js-page-title-phrase2">...</span>. ¡Practícalas para nuestro próximo encuentro!</p>
            <div id="phrases-container"></div>
            <div class="etiquette-tip">
                <h3>¡Consejo de Compras!</h3>
                <p>En Japón, es común que te ofrezcan una bolsa o te envuelvan el artículo sin costo adicional. No es necesario pedirlo explícitamente a menos que tengas una preferencia.</p>
            </div>
        </section>

        <section id="mini-games">
            <h2>Mini-Juegos Rápidos</h2>
            <div class="quiz-container">
                <h3>Quiz Exprés: ¿Cuánto sabes de Japón?</h3>
                <div id="quiz-questions-container"></div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Nihongo Nights. Un evento para conectar culturas.</p>
    </footer>

    <script src="./data-de-compras.js"></script>
    <script>
        function openVocab(evt, vocabName) {
            var i, vocabcontent, tablinks;
            vocabcontent = document.getElementsByClassName("vocab-content");
            for (i = 0; i < vocabcontent.length; i++) {
                vocabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tab-link");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(vocabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        function checkAnswer(button, isCorrect, questionIndex) {
            const question = button.parentElement.parentElement;
            const resultText = document.getElementById(`quiz-result-${questionIndex}`);
            const options = question.querySelectorAll('.quiz-option');

            options.forEach(option => {
                option.classList.remove('correct', 'incorrect'); // Remove previous highlights
            });

            if (isCorrect) {
                button.classList.add('correct');
                resultText.textContent = '¡Correcto!';
                resultText.style.color = 'green';
                options.forEach(option => {
                    option.disabled = true; // Disable all options if correct
                });
            } else {
                button.classList.add('incorrect');
                resultText.textContent = ''; // Clear result text for incorrect answers
                // Do not disable options, allow user to try again
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Replace template titles with pageData values
            if (pageData.pageTitle) {
                const jsPageTitle = document.getElementById('js-page-title');
                if (jsPageTitle) jsPageTitle.textContent = pageData.pageTitle;
                const jsPageTitlePhrase = document.getElementById('js-page-title-phrase');
                if (jsPageTitlePhrase) jsPageTitlePhrase.textContent = pageData.pageTitle;
                const jsPageTitlePhrase2 = document.getElementById('js-page-title-phrase2');
                if (jsPageTitlePhrase2) jsPageTitlePhrase2.textContent = pageData.pageTitle;
            }
            if (pageData.pageSubtitle) {
                const jsPageSubtitle = document.getElementById('js-page-subtitle');
                if (jsPageSubtitle) jsPageSubtitle.textContent = pageData.pageSubtitle;
            }

            // Populate Conversation Starters
            const randomStarterButton = document.getElementById('random-starter-button');
            const randomStarterDisplay = document.getElementById('random-starter-display');
            const starterEs = document.getElementById('starter-es');
            const starterJa = document.getElementById('starter-ja');
            const starterRo = document.getElementById('starter-ro');

            if (randomStarterButton && pageData.conversationStarters) {
                randomStarterButton.addEventListener('click', () => {
                    const randomIndex = Math.floor(Math.random() * pageData.conversationStarters.length);
                    const randomStarter = pageData.conversationStarters[randomIndex];
                    starterEs.textContent = randomStarter.es;
                    starterJa.textContent = randomStarter.ja;
                    starterRo.textContent = randomStarter.ro;
                    randomStarterDisplay.style.display = 'block';
                });
            }

            // Populate Vocabulary
            if (pageData.vocab) {
                for (const level in pageData.vocab) {
                    const vocabGrid = document.getElementById(level).querySelector('.vocab-grid');
                    vocabGrid.innerHTML = ''; // Clear existing content
                    pageData.vocab[level].forEach(item => {
                        const vocabItem = document.createElement('div');
                        vocabItem.classList.add('vocab-item');
                        vocabItem.innerHTML = `<span>${item.emoji}</span> ${item.es} (${item.ja})`;
                        vocabGrid.appendChild(vocabItem);
                    });
                }
            }

            // Populate Essential Phrases
            const phrasesContainer = document.getElementById('phrases-container');
            if (phrasesContainer && pageData.phrases) {
                phrasesContainer.innerHTML = ''; // Clear existing content
                pageData.phrases.forEach(group => {
                    const phraseGroupDiv = document.createElement('div');
                    phraseGroupDiv.classList.add('phrase-group');
                    phraseGroupDiv.innerHTML = `<h3>${group.title}</h3><ul></ul>`;
                    const ul = phraseGroupDiv.querySelector('ul');
                    group.items.forEach((item, index) => {
                        const li = document.createElement('li');
                        li.innerHTML = `<input type="checkbox" id="phrase-${group.title.replace(/\s/g, '')}-${index}"><label for="phrase-${group.title.replace(/\s/g, '')}-${index}"><strong>${item.es}</strong> - ${item.ja} (${item.ro})</label>`;
                        ul.appendChild(li);
                    });
                    phrasesContainer.appendChild(phraseGroupDiv);
                });
            }

            // Populate Mini-Games (Quizzes)
            const quizQuestionsContainer = document.getElementById('quiz-questions-container');
            if (quizQuestionsContainer && pageData.quizzes) {
                quizQuestionsContainer.innerHTML = ''; // Clear existing content
                pageData.quizzes.forEach((quiz, qIndex) => {
                    const quizQuestionDiv = document.createElement('div');
                    quizQuestionDiv.classList.add('quiz-question');
                    let optionsHtml = '';
                    quiz.options.forEach((option, oIndex) => {
                        optionsHtml += `<button class=\"quiz-option\" onclick=\"checkAnswer(this, ${option.isCorrect}, ${qIndex})\">${option.text}</button>`;
                    });
                    quizQuestionDiv.innerHTML = `
                        <p><strong>${qIndex + 1}. ${quiz.question}</strong></p>
                        <div class=\"quiz-options\">${optionsHtml}</div>
                        <p class=\"quiz-feedback\" id=\"quiz-result-${qIndex}\"></p>
                    `;
                    quizQuestionsContainer.appendChild(quizQuestionDiv);
                });
            }

            // Initialize vocab tabs
            openVocab(event, 'n5');
        });
    </script>
</body>
</html>